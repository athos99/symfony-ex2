{% extends 'bootstrap_3_layout.html.twig' %}




{%- block form_widget_simple -%}
    {{ parent() }}
    {% if autocomplete is defined %}
        <input type="hidden" id="language_language" name="language[language]" required="required" placeholder="Start typing" class="form-control" />
        <script type="text/javascript">
            $(document).ready(function () {
                var {{ id }} =
                new Bloodhound({
                    datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),
                    queryTokenizer: Bloodhound.tokenizers.whitespace,
                    remote: {
                        {% set q =  autocomplete.wildcard %}
                        url: '{{ url(autocomplete.route, { q: ':query' }) }}',
                        wildcard: '{{ ':query' }}'
                    }
                });

var key='id';
                $('#{{ id }}').typeahead(
                        {minLength: 1},
                        {source: {{ id }}, display: 'name'}
                ).bind('typeahead:selected', function (e, item) {
                    $('#language_language').val( key ? item[key] : item);
                }).bind('typeahead:autocomplete', function (e, item) {
                    $('#language_language').val( key ? item[key] : item);
                });
                ;
            });
        </script>
    {% endif %}
{%- endblock form_widget_simple -%}

